<!doctype html>
<html>
   <head>

      <link rel="stylesheet" href="login.css"/>
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Basic&display=swap" rel="stylesheet">
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">


      <title>LOGIN</title>
   </head>
   <body>
      <div class="container">
         <form id="FrmLogin" class="form" method="post" action="#">
            <div class="login-box">
               <div class="main-div">
                  <div class="title">
                     <h3>LOGIN</h3>
                  </div>
                  <div class="row">
                     <div class="textboxtop"><input id="txtEmail"  type="text" placeholder="Email"/></div>
                     <div class="textboxtop"><input id="txtPassword" type="password" placeholder="Password"/></div>
                  </div>
                  <button  type="submit" class="submit" id="submit">LOGIN</button>
               </div>
            </div>
         </form>
      </div>
      <!-- The core Firebase JS SDK is always required and must be listed first -->
      <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase.js"></script>
      <script>
         // Your web app's Firebase configuration
         // For Firebase JS SDK v7.20.0 and later, measurementId is optional
         var firebaseConfig = {
           apiKey: "AIzaSyBlLqtPK-ujPV_XJnSImO-R-P4sAmRA0tg",
           authDomain: "app2021-2e505.firebaseapp.com",
           databaseURL: "https://app2021-2e505-default-rtdb.firebaseio.com",
           projectId: "app2021-2e505",
           storageBucket: "app2021-2e505.appspot.com",
           messagingSenderId: "1008325124117",
           appId: "1:1008325124117:web:aafb2b1e5f7cf2e59b2e1c",
           measurementId: "G-V05ZETBS9S"
         };
         // Initialize Firebase
         firebase.initializeApp(firebaseConfig);
         
         document.getElementById('FrmLogin').addEventListener('submit',function(e){
         e.preventDefault();
         
         var email=document.getElementById('txtEmail');
         var password=document.getElementById('txtPassword');
         
         	if(email.value!="" && password.value!="")
         	{        		
               firebase.database().ref('Users').orderByChild('email').equalTo(email.value).once('value', snapshot=>{
               if(snapshot.exists())                
                  							
               {
                   							
                     firebase.database().ref('Users').orderByChild('userName').equalTo(password.value).once('value', snapshot=>{
                     if(snapshot.exists())                
                     {	
               
                        alert("You Are Successfully Signed In! Welcome " + email.value);
                        window.location ='../Dashboard/dashboard.html'; 
           						 
                     }

                     else{
                        alert("Wrong email password");
                     }
                  });                                                                 
         	
         }
         else
              {
                  alert("Wrong email password");
               }
          });
               		 
         				
         	}
         	else
         	{
         		alert("Email & Password can not be empty");
         	}
         
         
         });
         
      </script>
   </body>
   
</html>